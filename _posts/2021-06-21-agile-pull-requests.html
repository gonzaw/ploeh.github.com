---
layout: post
title: "Agile pull requests"
description: "If it hurts, do it more often."
date: 2021-06-21 5:44 UTC
tags: [Productivity]
image: "/content/binary/timeline-with-minimal-wait-time.jpg"
image_alt: "Timeline with short wait time between a feature is submitted for and the review actually takes place."
---
{% include JB/setup %}

<div id="post">
	<p>
		<em>{{ page.description }}</em>
	</p>
	<p>
		The agile software development movement has been instrumental in <a href="https://agilemanifesto.org">uncovering better ways of developing software</a>. Under that umbrella term you find such seminal ideas as test-driven development, continuous delivery, responding to change, and so on. Yet, as we're entering the third decade of agile software development, most organisations still struggle to take in the ethos and adopt its practices.
	</p>
	<p>
		Change is hard. A typical reaction from a development organisation would be:
	</p>
	<p>
		<em>"We tried it, but it doesn't work for us."</em>
	</p>
	<p>
		The usual agile response to such foot-draggery is: <a href="https://martinfowler.com/bliki/FrequencyReducesDifficulty.html">if it hurts, do it more often</a>.
	</p>
	<p>
		I'd like to suggest exactly that remedy for a perceived problem that many agile proponents seem to believe exist.
	</p>
	<h3 id="5f207852a69a424fb5ad9625c0e5c1c4">
		Pull request problems and solutions <a href="#5f207852a69a424fb5ad9625c0e5c1c4" title="permalink">#</a>
	</h3>
	<p>
		I like collaborating with other developers via pull requests, but I also admit that my personality may influence that preference. I like deep contemplation; I like doing things on my own time, to my own schedule; I like having the freedom to self-organise. Yes, I fit <a href="http://amzn.to/1FWUzrM">the description of an introvert</a>. Pull requests do enable contemplation, they do let me self-organise.
	</p>
	<p>
		Yet, I'm quite aware that there are plenty of problems with pull requests. First, many pull requests are poorly done. They are too big, bundle together unrelated things and introduce noise. I wrote an article titled <a href="/2015/01/15/10-tips-for-better-pull-requests">10 tips for better Pull Requests</a> to help developers create better pull requests. With a little practice, you can write small, focused pull requests.
	</p>
	<p>
		If it hurts, do it more often.
	</p>
	<p>
		Another problem with pull requests is in the review process. The most common criticism of the pull request process with its review phase is that it takes too long. I discuss this problem, and a remedy, in my coming book <a href="/code-that-fits-in-your-head">Code That Fits in Your Head</a>:
		<blockquote>
			<p>
				"The problem with typical approaches is illustrated by [the figure below]. A developer submits a piece of work for review. Then much time passes before the review takes place.
			</p>
			<p>
				<img src="/content/binary/timeline-with-long-wait-time.jpg" alt="Timeline with a long wait time between a feature is submitted for review and the review actually takes place.">
			</p>
			<p>
				"[Figure caption:] How not to do code reviews: let much time pass between completion of a feature and the review. (The smaller boxes to the right of the review indicates improvements based on the initial review, and a subsequent review of the improvements.)
			</p>
			<p>
				"[The figure below] illustrates an obvious solution to the problem. Reduce the wait time. Make code reviews part of the daily rhythm of the organisation.
			</p>
			<p>
				<img src="/content/binary/timeline-with-minimal-wait-time.jpg" alt="Timeline with short wait time between a feature is submitted for and the review actually takes place.">
			</p>
			<p>
				"[Figure caption:] Reduce the wait time between feature completion and code review. A review will typically spark some improvements, and a smaller review of those improvements. These activities are indicated by the smaller boxes to the right of the review.
			</p>
			<p>
				"Most people already have a routine that they follow. You should make code reviews part of that routine. You can do that on an individual level, or you can structure your team around a daily rhythm. Many teams already have a daily stand-up. Such a regularly occurring event creates an anchor around which the day revolves. Typically, lunchtime is another natural break in work.
			</p>
			<p>
				"Consider, for example, setting aside half an hour each morning, as well as half an hour after lunch, for reviews.
			</p>
			<p>
				"Keep in mind that you should make only small sets of changes. Sets that represent less than half a day's work. If you do that, and all team members review those small changes twice a day, the maximum wait time will be around four hours."
			</p>
		</blockquote>
		I've tried this in a small organisation, and it <em>can</em> work. I'm not claiming that it's easy, but it's hardly impossible.
	</p>
	<p>
		If it hurts, do it more often.
	</p>
	<p>
		An underlying problem is that people often feel that they don't have the time to review their colleagues' code. This is a real problem. If you are being measured (formally or informally) on your 'individual contribution', then anything you do to help your team looks like a waste of time. This is, in my opinion, an organisational problem, rather than a problem with doing reviews.
	</p>
	<p>
		It's also a problem that pair programming <em>doesn't</em> solve.
	</p>
	<h3 id="0b6cf5764f084c22adb075e197249e3d">
		Pull requests versus pair programming <a href="#0b6cf5764f084c22adb075e197249e3d" title="permalink">#</a>
	</h3>
	<p>
		You <em>can</em> make the pull request process work, but should you? Isn't pair (or ensemble) programming better?
	</p>
	<p>
		Pair programming can also be effective. I discuss that too in <a href="/code-that-fits-in-your-head">my new book</a>. What works best, I believe, is a question of trade-offs. What's more important to you? <a href="/2020/03/16/conways-law-latency-versus-throughput">Latency or throughput</a>?
	</p>
	<p>
		In other words, while I have a personality-based preference for the contemplative, asynchronous pull request process, I readily admit that pair or ensemble programming may be better in many situations.
	</p>
	<p>
		I suspect, however, that many proponents of pair programming are as driven by their personality-based preference as I am, but that since they might be extroverts, they favour close personal interaction over contemplation.
	</p>
	<p>
		In any case, use what works for you, but be wary of unequivocal claims that one way is clearly better than the other. We have <a href="/2020/05/25/wheres-the-science">scant scientific knowledge about software development</a>. Most of what I write, and what industry luminaries write, is based on <a href="https://martinfowler.com/bliki/AnecdotalEvidence.html">anecdotal evidence</a>. This also applies to this discussion of pull requests versus pair programming.
	</p>
	<h3 id="3bfdb00387e64164a634722325f9710e">
		Conclusion <a href="#3bfdb00387e64164a634722325f9710e" title="permalink">#</a>
	</h3>
	<p>
		I have anecdotal evidence that pull requests can work in an 'agile' setting. One team had implemented continuous deployment and used pull requests because more than half the team members were working from remote (this was before the COVID-19 pandemic). Pull requests were small and reviews could typically be done in five-ten minutes. Knowing this, reviews were prompt and frequent. Turnaround-time was good.
	</p>
	<p>
		I also have anecdotal evidence that ensemble programming works well. To me, it solves a completely different problem, but I've used it to great effect for knowledge transfer.
	</p>
	<p>
		Programmers more extrovert than me report anecdotal evidence that pair programming is best, and I accept that this is true - for them. I do not, however, accept it as a universal truth. Neither do I claim that my personal preference for pull request is incontrovertibly best.
	</p>
</div>

<div id="comments">
	<hr>
	<h2 id="comments-header">
		Comments
	</h2>

    <div class="comment" id="b91ee20d71f840b9901d1150ba7e9fc0">
		<div class="comment-author">Timoth√©e</div>
		<div class="comment-content">
			<p>
				Hi. Thanks for this insight. 
                                And thank you for the emphasize about 'anecdotal' vs 'scientific proof'.
		        </p>
		        <p>
                                About this topic, do you have any information regarding <a href="http://www.knosof.co.uk/ESEUR/">Evidence-based Software Engineering (free ebook)</a> ? If so, is it worth reading ? (Yep, I have total confidence about your knowledge and your judgment)
			</p>
		</div>
		<div class="comment-date">2021-06-21 20:36 UTC</div>
	</div>
	
	 <div class="comment" id="300c4a1fac664b64b7a002c4e8721ad0">
		<div class="comment-author">Gonzalo Waszczuk</div>
		<div class="comment-content">
			<p>
				I agree with the adage "If it hurts, do it more", and I even think it should also be done in what you describe about liking to do things on "your own time" and that part of your introverted nature. 
				In such case, it "hurts" to be more talkative with team members and have frequent talks and face-to-face instances with them. But if it hurts, shouldn't it be done more often? 
				I am also an introvert, and as much as I'd like to be left alone, communication is such an important part of how a team works that I find myself forcing myself to have these "uncomfortable" instances, because I know they can be objectively better, for both me, the other person, and the team as a whole. 
			</p>
		        <p>                        	
				Personally, I find face-to-face code reviews (or pair programming) to bring a lot to the table because of it. 
				Misunderstandings can be solved faster; knowledge transfer can be done easily; it can prevent the back-and-forths of comments in pull reviews, by just solving those in a 1 minute conversation; it can allow the author to provide background context and information to make the reviewer waste less time (and the reviewer can ask questions to waste even less time); and more.
				I have to admit I worked with the above code-review style much more than the pull-request style, so there can be some bias and ignorance in my above statements. But I believe there are also some interesting insights.
			</p>
		</div>
		<div class="comment-date">2021-06-22 03:56 UTC</div>
	</div>
</div>
